{% extends "base.html" %}

{% block content %}
<div class="header">
    <h1>🎯 Decision Game Results</h1>
    <p>Your Choice Analysis</p>
</div>

<div class="card">
    <h2 style="text-align: center; margin-bottom: 30px; color: #ffffff;">Your Response</h2>
    
    <div style="background: linear-gradient(135deg, #2d3436 0%, #636e72 100%); padding: 25px; border-radius: 15px; margin-bottom: 30px;">
        <h3 style="color: #74b9ff; margin-bottom: 15px;">📋 Scenario:</h3>
        <p style="color: #ffffff; margin-bottom: 20px; line-height: 1.6;">
            {{ results.scenario.situation }}
        </p>
        
        <h3 style="color: #74b9ff; margin-bottom: 15px;">✅ Your Choice:</h3>
        <p style="color: #ffffff; margin: 0; line-height: 1.6; font-weight: 500;">
            {{ results.chosen_option.text }}
        </p>
    </div>
    
    {% set outcome_colors = {
        'secure': '#00b894',
        'anxious': '#fdcb6e', 
        'avoidant': '#e17055',
        'reactive': '#fd79a8',
        'passive': '#74b9ff',
        'retaliatory': '#e84393'
    } %}
    
    {% set outcome_emojis = {
        'secure': '💚',
        'anxious': '💛', 
        'avoidant': '🧡',
        'reactive': '❤️',
        'passive': '💙',
        'retaliatory': '💜'
    } %}
    
    <div style="background: linear-gradient(135deg, {{ outcome_colors.get(results.outcome_type, '#636e72') }} 0%, #2d3436 100%); padding: 25px; border-radius: 15px; margin-bottom: 30px;">
        <h3 style="color: #ffffff; margin-bottom: 15px; text-align: center;">
            {{ outcome_emojis.get(results.outcome_type, '💭') }} {{ results.outcome_type.title() }} Response
        </h3>
        <p style="color: #ffffff; margin: 0; line-height: 1.6; font-size: 1.1rem;">
            {{ results.feedback }}
        </p>
    </div>
    
    {% if results.outcome_type == 'secure' %}
    <div style="background: linear-gradient(135deg, #00b894 0%, #00a085 100%); padding: 20px; border-radius: 15px; margin-bottom: 20px;">
        <h4 style="color: #ffffff; margin-bottom: 10px;">🌟 Excellent Choice!</h4>
        <p style="color: #ffffff; margin: 0; line-height: 1.6;">
            You're demonstrating secure attachment patterns. This is the goal! Keep practicing this type of response.
        </p>
    </div>
    {% else %}
    <div style="background: linear-gradient(135deg, #74b9ff 0%, #0984e3 100%); padding: 20px; border-radius: 15px; margin-bottom: 20px;">
        <h4 style="color: #ffffff; margin-bottom: 10px;">💡 Growth Opportunity</h4>
        <p style="color: #ffffff; margin: 0; line-height: 1.6;">
            This response pattern is common but might not serve your relationships best. The secure response would be more effective in this situation.
        </p>
    </div>
    {% endif %}
    
    <div style="text-align: center; margin-top: 30px;">
        <a href="{{ url_for('decision_game', type=results.relationship_type, scenario_id='random') }}" class="btn">🎯 Try Another Scenario</a>
        <a href="{{ url_for('situationship_mode') }}" class="btn btn-secondary">🏠 Back to Situationship Mode</a>
    </div>
    
    {% set type_icons = {
        'romantic': '❤️',
        'friendship': '👥',
        'professional': '💼'
    } %}
    
    {% set type_descriptions = {
        'romantic': 'Making healthy choices in romantic relationships builds trust, promotes mutual respect, and creates sustainable connections.',
        'friendship': 'Positive friendship dynamics require boundaries, respect, and open communication to build lasting connections.',
        'professional': 'Strong professional relationships rely on clear communication, appropriate boundaries, and mutual respect.'
    } %}
    
    <div style="background: linear-gradient(135deg, #0984e3 0%, #74b9ff 100%); padding: 20px; border-radius: 15px; margin-top: 20px;">
        <h4 style="color: #ffffff; margin-bottom: 10px; display: flex; align-items: center;">
            <span style="font-size: 1.4rem; margin-right: 10px;">{{ type_icons.get(results.relationship_type, '🔮') }}</span>
            {{ results.relationship_type|title }} Relationship Skills
        </h4>
        <p style="color: #ffffff; margin: 0; line-height: 1.6;">
            {{ type_descriptions.get(results.relationship_type, 'Building healthy relationships requires consistent practice and self-awareness.') }}
        </p>
    </div>
</div>

<div class="card" style="background: linear-gradient(135deg, #2d3436 0%, #636e72 100%);">
    <h3 style="color: #74b9ff; margin-bottom: 15px;">🧠 Understanding Response Patterns</h3>
    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px;">
        <div>
            <h4 style="color: #00b894; margin-bottom: 10px;">💚 Secure</h4>
            <p style="color: #ffffff; margin: 0; font-size: 0.9rem; line-height: 1.5;">
                Direct communication, emotional regulation, healthy boundaries
            </p>
        </div>
        <div>
            <h4 style="color: #fdcb6e; margin-bottom: 10px;">💛 Anxious</h4>
            <p style="color: #ffffff; margin: 0; font-size: 0.9rem; line-height: 1.5;">
                Fear of abandonment, emotional reactivity, seeking reassurance
            </p>
        </div>
        <div>
            <h4 style="color: #e17055; margin-bottom: 10px;">🧡 Avoidant</h4>
            <p style="color: #ffffff; margin: 0; font-size: 0.9rem; line-height: 1.5;">
                Fear of intimacy, emotional withdrawal, self-protection
            </p>
        </div>
        <div>
            <h4 style="color: #fd79a8; margin-bottom: 10px;">❤️ Reactive</h4>
            <p style="color: #ffffff; margin: 0; font-size: 0.9rem; line-height: 1.5;">
                Emotional outbursts, poor impulse control, escalation
            </p>
        </div>
    </div>
</div>
{% endblock %}
